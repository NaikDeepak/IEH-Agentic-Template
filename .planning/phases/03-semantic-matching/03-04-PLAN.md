---
phase: 03-semantic-matching
plan: 04
type: execute
wave: 2
depends_on: [03-01]
files_modified:
  - src/pages/JobsPage.tsx
  - src/components/JobCard.tsx
autonomous: true
must_haves:
  truths:
    - "Jobs page allows toggling between 'Browse' and 'Search'"
    - "Search results show match scores"
    - "Empty search returns to browse mode"
  artifacts:
    - path: "src/pages/JobsPage.tsx"
      provides: "Unified Job UI"
  key_links:
    - from: "JobsPage.tsx"
    - to: "searchJobs"
      via: "import from lib/ai/search"
---

<objective>
Integrate semantic search into the main Jobs Page.

Purpose: Replace/Augment the static "Browse" list with a dynamic AI search.
Output: Updated `JobsPage.tsx` with search capabilities.
</objective>

<execution_context>
@/Users/deepaknaik/.claude/get-shit-done/workflows/execute-plan.md
@/Users/deepaknaik/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/03-semantic-matching/03-CONTEXT.md
@src/lib/ai/search.ts
@src/pages/JobsPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Job Card for Match Score</name>
  <files>src/components/JobCard.tsx</files>
  <action>
    Update `JobCard` props to accept optional `matchScore`.

    If `matchScore` is provided:
    - Display a badge "X% Match".
    - Color code: Green (>80), Yellow (50-80), Gray (<50).
    - Place it prominently (e.g., top right or near title).
  </action>
  <verify>grep "matchScore" src/components/JobCard.tsx</verify>
  <done>JobCard displays match score</done>
</task>

<task type="auto">
  <name>Task 2: Integrate Search into Jobs Page</name>
  <files>src/pages/JobsPage.tsx</files>
  <action>
    Refactor `src/pages/JobsPage.tsx`.

    UI Changes:
    - Add Search Bar at the top (Title/Keywords).
    - Add "Clear" button when search is active.

    Logic:
    - Default state: Fetch `jobService.getJobs()` (Active First browse).
    - Search state: If query is not empty -> `searchJobs(query)`.
    - Result handling:
      - Search results come from API (with match scores).
      - Browse results come from Firestore SDK (no match scores).
      - Normalize both to `JobPosting[]` structure for the list.

    Refinement:
    - Show "Viewing top matches for..." banner when searching.
  </action>
  <verify>grep "searchJobs" src/pages/JobsPage.tsx</verify>
  <done>JobsPage supports semantic search</done>
</task>

</tasks>

<verification>
Manual verification:
Verify that clearing the search input restores the "Browse" list.
Verify that search results display the match badge.
</verification>

<success_criteria>
- [ ] Search input functional on Jobs Page
- [ ] Switches between "Browse" (SDK) and "Search" (API) seamlessly
- [ ] Match scores displayed on search results
</success_criteria>

<output>
After completion, create `.planning/phases/03-semantic-matching/03-04-SUMMARY.md`
</output>
