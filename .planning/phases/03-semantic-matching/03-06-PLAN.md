---
phase: 03-semantic-matching
plan: 06
type: execute
wave: 2
depends_on: ["03-05"]
files_modified: [src/pages/JobsPage.tsx, src/features/jobs/services/jobService.ts]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Closed jobs do not appear as 'Passive' in the UI"
    - "Browse view initially shows only active jobs"
  artifacts:
    - path: "src/pages/JobsPage.tsx"
      provides: "Correct status mapping logic"
    - path: "src/features/jobs/services/jobService.ts"
      provides: "Strict active filtering for browse"
---

<objective>
Fix job browsing and status display logic to prevent closed/passive jobs from leaking into active views.
Purpose: Close UAT 8 "Active and Closed are showing" and "Active-Only Results" gap.
</objective>

<execution_context>
@/Users/deepaknaik/.claude/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/03-semantic-matching/03-UAT.md
@.planning/phases/03-semantic-matching/03-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Correct Status Mapping in JobsPage</name>
  <files>src/pages/JobsPage.tsx</files>
  <action>
    - Update `mapJobPostingToJob` (around line 110).
    - Instead of a binary ternary `status === 'active' ? 'active' : 'passive'`, handle the statuses explicitly.
    - If `status` is 'active', map to 'active'.
    - If `status` is 'passive', map to 'passive'.
    - If `status` is 'closed' or anything else, ensure it is treated as closed/inactive so the UI doesn't mislabel it.
  </action>
  <verify>Check JobCard rendering for a 'closed' job in dev tools if possible.</verify>
  <done>Mapping logic preserves 'active' and 'passive' and does not conflate 'closed' with 'passive'.</done>
</task>

<task type="auto">
  <name>Task 2: Strict Active Filtering for Browse View</name>
  <files>src/features/jobs/services/jobService.ts</files>
  <action>
    - In `getJobs` (around line 170), change the `where("status", "in", ["active", "passive"])` filter to simply `where("status", "==", "active")`.
    - This ensures the "Open Positions" browse mode only shows truly active jobs, maintaining platform freshness as per the "Active System" goals.
  </action>
  <verify>Reload /jobs and verify only 'ACTIVE' badges are visible in the initial list.</verify>
  <done>getJobs only returns jobs with status 'active'.</done>
</task>

</tasks>

<verification>
Visit /jobs. Ensure only active jobs show. Verify status badges are correct.
</verification>

<success_criteria>
Marketplace freshness is enforced in browse view and status mapping is accurate.
</success_criteria>

<output>
After completion, create `.planning/phases/03-semantic-matching/03-06-SUMMARY.md`
</output>
