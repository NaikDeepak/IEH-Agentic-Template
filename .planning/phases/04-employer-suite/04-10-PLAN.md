---
phase: 04-employer-suite
plan: 10
type: execute
wave: 7
depends_on: [04-09]
files_modified: [src/server/features/ai/ai.controller.js, functions/index.js, src/components/Header.tsx, src/components/JobCard.tsx, src/pages/PostJob.tsx, src/pages/employer/EmployerJobs.tsx, src/App.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "AI JD generation works even if skills/experience are initially empty"
    - "Employers can navigate to their dashboard via 'Manage Jobs'"
    - "Employer can access ATS Kanban board directly from their job cards"
  artifacts:
    - path: "src/server/features/ai/ai.controller.js"
      provides: "Relaxed AI validation"
    - path: "src/pages/employer/EmployerJobs.tsx"
      provides: "Employer-specific job management view"
    - path: "src/components/JobCard.tsx"
      provides: "View Applicants action for owners"
  key_links:
    - from: "src/components/Header.tsx"
      to: "/employer/jobs"
      pattern: "/employer/jobs"
    - from: "src/pages/employer/EmployerJobs.tsx"
      to: "/employer/jobs/:id/applicants"
      via: "onViewApplicants handler"
---

<objective>
Resolve the final two major gaps in the Employer Suite:
1. Fix the 400 Bad Request error in AI JD generation caused by overly strict validation.
2. Fix navigation and UX issues that make the ATS Kanban board difficult to find by creating a dedicated Employer Jobs dashboard.
</objective>

<execution_context>
@/Users/deepaknaik/.claude/get-shit-done/workflows/execute-plan.md
@/Users/deepaknaik/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-employer-suite/04-UAT.md
@src/App.tsx
@src/components/Header.tsx
@src/components/JobCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Relax AI Validation & Standardize Backends</name>
  <files>src/server/features/ai/ai.controller.js, functions/index.js, src/pages/PostJob.tsx</files>
  <action>
    1. Update `src/server/features/ai/ai.controller.js` and `functions/index.js` (generateJdHandler) to:
       - ONLY require 'role' (Job Title).
       - Log exactly what fields are missing for debugging.
       - Provide default empty strings for 'skills', 'experience', 'location', etc.
    2. Update `src/pages/PostJob.tsx` to ensure `handleAiGenerateJd` sends empty strings instead of undefined for optional fields.
    3. Remove any lingering middleware that might be enforcing strict presence of 'skills' or 'experience' in AI routes.
  </action>
  <verify>
    Run `curl -X POST http://localhost:5001/api/ai/generate-jd -H "Content-Type: application/json" -d '{"role": "Software Engineer"}'` (mock auth if needed) and verify it doesn't return 400.
  </verify>
  <done>AI JD generation succeeds with just a title provided.</done>
</task>

<task type="auto">
  <name>Task 2: Employer Jobs Dashboard & Navigation</name>
  <files>src/pages/employer/EmployerJobs.tsx, src/App.tsx, src/components/Header.tsx, src/components/JobCard.tsx</files>
  <action>
    1. Create `src/pages/employer/EmployerJobs.tsx`:
       - Fetch only jobs created by the current employer.
       - Render `JobCard` for each job.
       - Use IEH Brutalist design.
    2. Update `src/components/JobCard.tsx`:
       - Add an optional `onViewApplicants` prop.
       - If `onViewApplicants` is provided, render a "View Applicants" button/link in the footer area using Lucide `Users` icon.
    3. In `src/pages/employer/EmployerJobs.tsx`, pass a navigation handler to `onViewApplicants` that goes to `/employer/jobs/:id/applicants`.
    4. Update `src/App.tsx` to register route `/employer/jobs` pointing to `EmployerJobs`.
    5. In `src/components/Header.tsx`, update the 'Manage Jobs' link for employers to point to `/employer/jobs` instead of `/jobs`.
  </action>
  <verify>
    1. Log in as employer, verify Header "Manage Jobs" goes to /employer/jobs.
    2. Verify `/employer/jobs` shows only the employer's jobs.
    3. Verify job cards on this page have a "View Applicants" button that leads to the Kanban board.
  </verify>
  <done>Employer can access their dedicated job management dashboard and specific job applicants easily via the UI.</done>
</task>

</tasks>

<verification>
1. Test Post Job flow: Enter Title only -> Click Generate -> Works.
2. Test Navigation: Header "Manage Jobs" -> Leads to Employer Jobs dashboard.
3. Test ATS Link: Employer Jobs -> Job Card -> Click "View Applicants" -> Leads to Kanban board.
</verification>

<success_criteria>
- AI JD generation no longer returns 400 for partial inputs.
- All ATS/Employer routes are reachable via direct UI interaction (no manual URL entry needed).
- Dedicated employer dashboard allows managing only their own job postings.
</success_criteria>

<output>
After completion, create `.planning/phases/04-employer-suite/04-10-SUMMARY.md`
</output>
