---
phase: 04-employer-suite
plan: 10
type: execute
wave: 5
depends_on: [04-09]
files_modified: [src/server/features/ai/ai.controller.js, functions/index.js, src/components/Header.tsx, src/components/JobCard.tsx, src/pages/PostJob.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "AI JD generation works even if skills/experience are initially empty"
    - "Employers can navigate to their dashboard via 'Manage Jobs'"
    - "Employer can access ATS Kanban board directly from their job cards"
  artifacts:
    - path: "src/server/features/ai/ai.controller.js"
      provides: "Relaxed AI validation"
    - path: "src/components/Header.tsx"
      provides: "Correct employer dashboard navigation"
    - path: "src/components/JobCard.tsx"
      provides: "View Applicants action for owners"
  key_links:
    - from: "src/components/Header.tsx"
      to: "/employer/jobs"
      pattern: "/employer/jobs"
---

<objective>
Resolve the final two major gaps in the Employer Suite:
1. Fix the 400 Bad Request error in AI JD generation caused by overly strict validation.
2. Fix navigation and UX issues that make the ATS Kanban board difficult to find.
</objective>

<execution_context>
@/Users/deepaknaik/.claude/get-shit-done/workflows/execute-plan.md
@/Users/deepaknaik/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-employer-suite/04-UAT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Relax AI Validation & Standardize Backends</name>
  <files>src/server/features/ai/ai.controller.js, functions/index.js, src/pages/PostJob.tsx</files>
  <action>
    1. Update `src/server/features/ai/ai.controller.js` and `functions/index.js` (generateJdHandler) to:
       - ONLY require 'role' (Job Title).
       - Log exactly what fields are missing for debugging.
       - Provide default empty strings for 'skills', 'experience', 'location', etc.
    2. Update `src/pages/PostJob.tsx` to ensure `handleAiGenerateJd` sends empty strings instead of undefined for optional fields.
    3. Remove any lingering middleware that might be enforcing strict presence of 'skills' or 'experience' in AI routes.
  </action>
  <verify>
    Run `curl -X POST http://localhost:5001/api/ai/generate-jd -H "Content-Type: application/json" -d '{"role": "Software Engineer"}'` (mock auth if needed) and verify it doesn't return 400.
  </verify>
  <done>AI JD generation succeeds with just a title provided.</done>
</task>

<task type="auto">
  <name>Task 2: Fix Employer Navigation & ATS Access</name>
  <files>src/components/Header.tsx, src/components/JobCard.tsx</files>
  <action>
    1. In `src/components/Header.tsx`, update the 'Manage Jobs' link for employers to point to `/employer/jobs` instead of `/jobs`.
    2. In `src/components/JobCard.tsx`:
       - Add an optional `onViewApplicants` prop.
       - If `onViewApplicants` is provided, render a "View Applicants" button/link in the footer area.
       - Use Lucide `Users` icon for the button.
    3. In `src/pages/EmployerDashboard.tsx` (or wherever JobCards are rendered for employers), pass the navigation handler to `onViewApplicants`.
  </action>
  <verify>
    1. Log in as employer, verify Header "Manage Jobs" goes to /employer/jobs.
    2. Verify job cards on the dashboard have a "View Applicants" button.
  </verify>
  <done>Employer can access their dashboard and specific job applicants easily via the UI.</done>
</task>

</tasks>

<verification>
1. Test Post Job flow: Enter Title only -> Click Generate -> Works.
2. Test Navigation: Header "Manage Jobs" -> Leads to Employer Dashboard.
3. Test ATS Link: Dashboard -> Job Card -> Click "View Applicants" -> Leads to Kanban board.
</verification>

<success_criteria>
- AI JD generation no longer returns 400 for partial inputs.
- All ATS/Employer routes are reachable via direct UI interaction (no manual URL entry needed).
</success_criteria>

<output>
After completion, create `.planning/phases/04-employer-suite/04-10-SUMMARY.md`
</output>
