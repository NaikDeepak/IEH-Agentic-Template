# Plan: 07-06 — CI/CD Pipeline & Deployment Automation

## Goal
Automate the build → test → deploy workflow using GitHub Actions so every push is verified and staging deploys happen automatically.

## Proposed Changes

### 1. GitHub Actions Workflow
- Create `.github/workflows/ci.yml` with pipeline:
  1. `npm ci` — Install dependencies.
  2. `npm run lint` — Lint check.
  3. `npm run typecheck` — Type safety.
  4. `npm test` — Unit tests.
  5. `npm run build` — Production build.
  6. `npm run test:e2e` — Playwright E2E (depends on 07-02).

### 2. Firebase Preview Channels
- Configure `firebase hosting:channel:deploy` for PR preview URLs.
- Add Firebase deploy step for `main` branch pushes to staging.

### 3. Secrets Management
- Store `FIREBASE_TOKEN`, `GEMINI_API_KEY`, and `SENTRY_AUTH_TOKEN` as GitHub Secrets.
- Ensure `.env.example` documents all required variables.

### 4. Branch Protection
- Document recommended branch protection rules:
  - Require CI pass before merge.
  - Require at least 1 review.
  - No direct pushes to `main`.

## Verification Plan
1. Push to a feature branch — CI pipeline runs all steps.
2. Open a PR — Firebase preview channel URL is posted as a comment.
3. Merge to `main` — staging deploy triggers automatically.
