# Plan: 06-05 - Referral Success Trigger (First Application)

## Goal
Reward referrers when their referred users complete their first job application.

## Proposed Changes

### 1. Logic: First Application Check
- Update `ApplicationService.submitApplication`.
- After successful submission, call `ReferralService.checkAndRewardReferrer(uid)`.

### 2. Service: Referral Reward Logic
- `checkAndRewardReferrer(uid)`:
  - Check if user has `referredBy` and `referralRewarded` is not true.
  - Count applications for `uid`. If count == 1:
    - Verify `phoneVerified` and `linkedinVerified`.
    - If valid, use `LedgerService.addPoints(referrerUid, 50, 'referral_bonus', { referredUid: uid })`.
    - Set `referralRewarded: true` on the referred user's doc.

## Verification Plan
1. Register User B with User A's code.
2. Verify User B (Phone/LinkedIn).
3. User B applies for a job.
4. Verify User A receives points.
5. User B applies for a second job; verify no additional points are awarded.
